# InterviewAce — Project Overview

## What Is It?

**InterviewAce** is an AI-powered interview preparation backend built with FastAPI. It lets users upload their resume, get it analyzed by an LLM, and then run a personalized mock interview session where questions are generated from the resume and answers are evaluated with AI feedback.

---

## Feature Set

### Resume Module
| Feature | Description |
|---|---|
| Upload | Accepts PDF and DOCX files (up to 10 MB) |
| Parsing | Text extracted with `pdfplumber` (PDF) / `python-docx` (DOCX) |
| AI Analysis | Google Gemini parses into structured JSON (name, skills, experience, education, inferred role, years of experience, confidence score) |
| NER Fallback | HuggingFace spaCy NER pipeline used when Gemini fails |
| Versioning | Resumes support parent/child version chains |
| Sharing | Public share tokens allow read-only access without authentication |
| Export | Resume data can be exported |
| Management | CRUD operations on resumes per user |

### Interview Module
| Feature | Description |
|---|---|
| Start Session | Creates a session linked to the user's latest resume |
| Question Generation | 12–15 questions (technical, behavioural, project-based) generated by Gemini |
| Answer Submission | User submits answers per question |
| AI Evaluation | Gemini evaluates each answer with a score and comment |
| Summary | Final session score + overall feedback summary |
| History | List of all past interview sessions for a user |
| Next Question | Stateful question-by-question navigation |

### Authentication Module
| Feature | Description |
|---|---|
| Register | Email + password with complexity validation |
| Login | Returns JWT access token + refresh token |
| Logout | Blacklists the current token in DB |
| Refresh Token | Issues a new access token using the refresh token |
| Email Verification | Token sent via SMTP; user must verify before full access |
| Password Reset | Email-based reset flow with 15-minute expiry tokens |
| Change Password | Enforces password history (last 5 passwords blocked) |
| Me | Returns current authenticated user profile |

---

## Tech Stack

| Layer | Technology |
|---|---|
| Web Framework | FastAPI 0.109 + Uvicorn 0.27 |
| Language | Python 3.x |
| Database | PostgreSQL (via psycopg2-binary) |
| ORM | SQLAlchemy 2.0 |
| Validation | Pydantic v2 + pydantic-settings |
| Authentication | JWT (python-jose) + bcrypt (passlib, 12 rounds) |
| AI — Primary | Google Gemini 2.0 Flash (`google-genai`) |
| AI — Fallback | HuggingFace Transformers + spaCy NER |
| PDF Parsing | pdfplumber |
| DOCX Parsing | python-docx |
| Email | SMTP via Python `smtplib` |
| Config | python-dotenv + pydantic-settings |

---

## Repository Layout

```
InterviewAce/
├── README.md
├── requirements.txt
├── Docs/                          # ← project documentation (this folder)
└── backend/
    ├── main.py                    # FastAPI app entry point
    └── app/
        ├── api/
        │   ├── deps.py            # Shared FastAPI dependencies
        │   └── v1/
        │       ├── api.py         # Root router (auth + interview + resume)
        │       └── endpoints/
        │           ├── auth/      # 10 auth endpoints
        │           ├── interview/ # 7 interview endpoints
        │           └── resume/    # 6 resume endpoints
        ├── core/
        │   ├── config.py          # All settings via pydantic-settings
        │   ├── security.py        # JWT, bcrypt, sessions, token blacklist
        │   └── middleware.py      # Security headers + rate limiting
        ├── db/
        │   ├── session.py         # SQLAlchemy engine + session factory
        │   └── init_db.py         # Schema creation script
        ├── models/                # SQLAlchemy ORM models
        ├── schemas/               # Pydantic request/response schemas
        ├── services/
        │   ├── auth_service.py    # Password reset tokens
        │   ├── interview_orchestrator.py  # LLM question + feedback logic
        │   └── resume_parser.py   # Resume extraction + AI structuring
        └── utils/
            ├── llm_client.py      # Gemini API wrapper
            ├── email_service.py   # SMTP email sender
            ├── email_utils.py     # Email template helpers
            └── file_handler.py    # File save + validation helpers
```

---

## Quick Start

```bash
# 1. Create and activate virtual environment
python -m venv .venv
.venv\Scripts\activate          # Windows
source .venv/bin/activate       # Linux/macOS

# 2. Install dependencies
pip install -r requirements.txt

# 3. Configure environment
cp .env.example .env            # fill in real values

# 4. Initialize database
cd backend
python -m app.db.init_db

# 5. Run development server
uvicorn main:app --reload

# Docs available at:
# http://localhost:8000/docs      (Swagger UI)
# http://localhost:8000/redoc     (ReDoc)
```

---

## Environment Variables

| Variable | Required | Description |
|---|---|---|
| `SECRET_KEY` | **Yes** | JWT signing secret (use a 32+ char random string) |
| `POSTGRES_SERVER` | Yes | DB host (default: `localhost`) |
| `POSTGRES_USER` | Yes | DB user (default: `postgres`) |
| `POSTGRES_PASSWORD` | Yes | DB password |
| `POSTGRES_DB` | Yes | DB name (default: `interview_ace`) |
| `GEMINI_API_KEY` | **Yes** | Google Gemini API key |
| `SMTP_SERVER` | Yes | SMTP host for emails |
| `SMTP_USERNAME` | Yes | SMTP login |
| `SMTP_PASSWORD` | Yes | SMTP password |
| `SMTP_PORT` | No | SMTP port (default: `587`) |
| `FROM_EMAIL` | No | Sender address for outgoing emails |
| `ALLOWED_ORIGINS` | No | JSON array of allowed CORS origins |
